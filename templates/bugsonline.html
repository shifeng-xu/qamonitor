<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<title>Cloud Admin | Dashboard</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
	<meta name="description" content="">
	<meta name="author" content="">
    <!-- MAGIC SUGGEST -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/magic-suggest/magicsuggest-1.3.1-min.css" />

	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/css/cloud-admin.css" >
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/css/themes/default.css" id="skin-switcher" >
	<link rel="stylesheet" type="text/css"  href="../static/CloudAdmin/css/responsive.css" >
	<!-- STYLESHEETS --><!--[if lt IE 9]><script src="js/flot/excanvas.min.js"></script><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->
	<link href="../static/CloudAdmin/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<!-- ANIMATE -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/css/animatecss/animate.min.css" />
	<!-- DATE RANGE PICKER -->
{#	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/bootstrap-daterangepicker/daterangepicker-bs3.css" />#}
	<!-- TODO -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/jquery-todo/css/styles.css" />
	<!-- FULL CALENDAR -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/fullcalendar/fullcalendar.min.css" />
	<!-- GRITTER -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/gritter/css/jquery.gritter.css" />

    <!-- SELECT2 -->
	<link rel="stylesheet" type="text/css" href="../static/CloudAdmin/js/select2/select2.min.css" />



	<!-- FONTS -->
{#	<link href='http://fonts.useso.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>#}



    <link rel="stylesheet" href="../static/daterangepickernew/bootstrap.min.css">
 	<link rel="stylesheet" href="../static/daterangepickernew/daterangepicker.css">




</head>
<body>
	<!-- HEADER -->
	<header class="navbar clearfix" id="header">

		<div class="container">
				<div class="navbar-brand">
					<!-- COMPANY LOGO -->
					<a href="/quality/bugsoffline">
						<img src="../static/CloudAdmin/img/logo/logo@2x.png" alt="Cloud Admin Logo" class="img-responsive" height="30" width="180">
						<img src="../static/CloudAdmin/img/logo/dlpt180x30.png" alt="Cloud Admin Logo" class="img-responsive" height="30" width="180" style="margin-left:180px;">

					</a>

					<!-- /COMPANY LOGO -->
					<!-- TEAM STATUS FOR MOBILE -->
					<div class="visible-xs">
						<a href="#" class="team-status-toggle switcher btn dropdown-toggle">
							<i class="fa fa-users"></i>
						</a>
					</div>
				</div>


				<!-- BEGIN TOP NAVIGATION MENU -->					
				<ul class="nav navbar-nav pull-right">

					<!-- BEGIN USER LOGIN DROPDOWN -->
					<li class="dropdown user" id="header-user">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<img alt="" src="../static/CloudAdmin/img/avatars/avatar3.jpg" />
							<span class="username">{{ username }}</span>
							<i class="fa fa-angle-down"></i>
						</a>
						<ul class="dropdown-menu">
							<li><a href="/logout"><i class="fa fa-power-off"></i> 退出</a></li>
						</ul>
					</li>
					<!-- END USER LOGIN DROPDOWN -->
				</ul>
				<!-- END TOP NAVIGATION MENU -->
		</div>
		<!-- TEAM STATUS -->
		<div class="container team-status" id="team-status">
		  <div id="scrollbar">
			<div class="handle">
			</div>
		  </div>
		  <div id="teamslider">
			  <ul class="team-list">
				<li class="current">
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar3.jpg" alt="" />
				  </span>
				  <span class="title">
					You
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 35%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 20%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 10%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">6</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">3</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">1</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar1.jpg" alt="" />
				  </span>
				  <span class="title">
					Max Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 15%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 40%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 20%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">2</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">8</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">4</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar2.jpg" alt="" />
				  </span>
				  <span class="title">
					Jane Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 65%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 10%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 15%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">10</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">3</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">4</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar4.jpg" alt="" />
				  </span>
				  <span class="title">
					Ellie Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 5%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 48%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 27%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">1</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">6</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">2</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar5.jpg" alt="" />
				  </span>
				  <span class="title">
					Lisa Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 21%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 20%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 40%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">4</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">5</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">9</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar6.jpg" alt="" />
				  </span>
				  <span class="title">
					Kelly Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 45%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 21%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 10%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">6</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">3</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">1</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar7.jpg" alt="" />
				  </span>
				  <span class="title">
					Jessy Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 7%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 30%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 10%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">1</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">6</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">2</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
				<li>
				  <a href="javascript:void(0);">
				  <span class="image">
					  <img src="../static/CloudAdmin/img/avatars/avatar8.jpg" alt="" />
				  </span>
				  <span class="title">
					Debby Doe
				  </span>
					<div class="progress">
					  <div class="progress-bar progress-bar-success" style="width: 70%">
						<span class="sr-only">35% Complete (success)</span>
					  </div>
					  <div class="progress-bar progress-bar-warning" style="width: 20%">
						<span class="sr-only">20% Complete (warning)</span>
					  </div>
					  <div class="progress-bar progress-bar-danger" style="width: 5%">
						<span class="sr-only">10% Complete (danger)</span>
					  </div>
					</div>
					<span class="status">
						<div class="field">
							<span class="badge badge-green">13</span> completed
							<span class="pull-right fa fa-check"></span>
						</div>
						<div class="field">
							<span class="badge badge-orange">7</span> in-progress
							<span class="pull-right fa fa-adjust"></span>
						</div>
						<div class="field">
							<span class="badge badge-red">1</span> pending
							<span class="pull-right fa fa-list-ul"></span>
						</div>
				    </span>
				  </a>
				</li>
			  </ul>
			</div>
		  </div>
		<!-- /TEAM STATUS -->
	</header>
	<!--/HEADER -->
	<div class="copyrights">Collect from <a href="http://www.cssmoban.com/" >企业网站模板</a></div>
	<!-- PAGE -->
	<section id="page">
				<!-- SIDEBAR -->
				<div id="sidebar" class="sidebar">
					<div class="sidebar-menu nav-collapse">
						<div class="divide-20"></div>
						<!-- SEARCH BAR -->
						<div id="search-bar">
							<input class="search" type="text" placeholder="Search"><i class="fa fa-search search-icon"></i>
						</div>
						<!-- /SEARCH BAR -->
						
						<!-- SIDEBAR QUICK-LAUNCH -->
						<!-- <div id="quicklaunch">
						<!-- /SIDEBAR QUICK-LAUNCH -->
						
						<!-- SIDEBAR MENU -->
						<ul>
                            <li class="has-sub open">
								<a href="javascript:;"  class="">
								<i class="fa fa-table fa-fw"></i> <span class="menu-text">测试质量管理</span>
								<span class="arrow open"></span>
								</a>
								<ul class="sub" style="display: block;">
									<li><a class="" href="/quality/bugsoffline"><span class="sub-menu-text">线下bug统计</span></a></li>
									<li><a class="" href="/quality/bugsonline"><span class="sub-menu-text">线上bug统计</span></a></li>
								</ul>
							</li>

                            <li class="has-sub open">
								<a href="javascript:;"  class="">
								<i class="fa fa-table fa-fw"></i> <span class="menu-text">后台管理</span>
								<span class="arrow open"></span>
								</a>
								<ul class="sub" style="display: block;">
									<li><a class="" href="/updateComponents/"><span class="sub-menu-text">模块数据更新</span></a></li>
								</ul>
							</li>

						</ul>
						<!-- /SIDEBAR MENU -->
					</div>
				</div>
				<!-- /SIDEBAR -->
		<div id="main-content">
			<!-- SAMPLE BOX CONFIGURATION MODAL FORM-->
			<div class="modal fade" id="box-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
				  <div class="modal-content">
					<div class="modal-header">
					  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					  <h4 class="modal-title">Box Settings</h4>
					</div>
					<div class="modal-body">
					  Here goes box setting content.
					</div>
					<div class="modal-footer">
					  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					  <button type="button" class="btn btn-primary">Save changes</button>
					</div>
				  </div>
				</div>
			  </div>
			<!-- /SAMPLE BOX CONFIGURATION MODAL FORM-->
			<div class="container">
				<div class="row">

					<div id="content" class="col-lg-12">
						<!-- PAGE HEADER-->
						<div class="row">
							<div class="col-sm-12">

								<div class="page-header">
									<!-- STYLER -->
									
									<!-- /STYLER -->
									<!-- BREADCRUMBS -->
									<ul class="breadcrumb">
										<li>
											<i class="fa fa-home"></i>
											<a href="/quality/bugsoffline">Home</a>
										</li>
										<li>线上bug统计</li>
									</ul>
									<!-- /BREADCRUMBS -->
									<div class="clearfix">
                                        <div class="col-lg-6">
                                            <h3 class="content-title pull-left">线上bug统计</h3>
                                        </div>

									</div>

								</div>
							</div>
						</div>
						<!-- /PAGE HEADER -->
						<!-- aaaaaaaaa-->
                        <div class="row">
								<div class="box border orange" style="margin-left:15px;margin-right:15px">
									<div class="box-title">
										<h4><i class="fa fa-check"></i>选择查询条件</h4>
									</div>

                                    <div class="row" style="width: 30%;margin-left:-3px;margin-right:15px">
                                        <h5 style="margin-left:5px;">请选择产品：</h5>
                                        <select multiple id="e2" class="col-md-12">
                                        </select>
                                    </div>
                                    <div class="col-md-12" style="height: 15px"></div>
                                    <div class="btn-group" style="margin-left:10px">
												<a class="js_update btn btn-default" id="today" onclick="onClickSearch('today')" href="#">今天</a>
												<a class="js_update btn btn-default" id="lastweak" onclick="onClickSearch('lastweak')" href="#">最近7天</a>
												<a class="js_update btn btn-default hidden-xs"  id="lastmonth" onclick="onClickSearch('lastmonth')" href="#">上个月</a>
												<a id="reportrange" class="btn reportrange">
													<i class="fa fa-calendar"></i>
													<span>自定义日期</span>
													<i class="fa fa-angle-down"></i>
												</a>
                                                <button class="btn btn-primary" id="searchBtn" onclick="onClickSearch('custom')">查询</button>
                                             </div>

											</div>

                                    <p class="btn-toolbar">

                                    </p>
                            <div class="col-md-12">
								<!-- BOX -->
								<div class="box border blue">
									<div class="box-title">
										<h4><i class="fa fa-signal"></i>产品bug数量曲线图</h4>
									</div>
									<div id="char2_bugsbypro" class="box-body" style="width: 1200px;height:500px;">
{#										<div id="chart_2" class="chart"></div>#}
									</div>
								</div>
								<!-- /BOX -->
							</div>

                            <div class="col-md-12">
								<!-- BOX -->
								<div class="box border blue">
									<div class="box-title">
										<h4><i class="fa fa-signal"></i>QA bug数量曲线图</h4>
									</div>
									<div id="char1_bugsbyqa" class="box-body" style="width: 1200px;height:500px;">
{#										<div id="chart_2" class="chart"></div>#}
									</div>
								</div>
								<!-- /BOX -->
							</div>
                            </div>
                        </div>
						<div class="footer-tools">
							<span class="go-top">
								<i class="fa fa-chevron-up"></i> Top
							</span>
						</div>
					</div><!-- /CONTENT-->
				</div>
			</div>
		</div>
	</section>
	<!--/PAGE -->
	<!-- JAVASCRIPTS -->
	<!-- Placed at the end of the document so the pages load faster -->
	<!-- JQUERY -->
{#	<script src="../static/CloudAdmin/js/jquery/jquery-2.0.3.min.js"></script>#}
    <script src="../static/daterangepickernew/jquery-2.2.3.min.js"></script>




	<!-- JQUERY UI-->
	<script src="../static/CloudAdmin/js/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
	<!-- BOOTSTRAP -->
	<script src="../static/CloudAdmin/bootstrap/js/bootstrap.min.js"></script>
	
		
	<!-- DATE RANGE PICKER -->
    <script src="../static/CloudAdmin/js/bootstrap-daterangepicker/daterangepicker.min.js"></script>
	<script src="../static/CloudAdmin/js/bootstrap-daterangepicker/moment.min.js"></script>


	<!-- SLIMSCROLL -->
	<script type="text/javascript" src="../static/CloudAdmin/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js">

    </script><script type="text/javascript" src="../static/CloudAdmin/js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js"></script>
	<!-- BLOCK UI -->
	<script type="text/javascript" src="../static/CloudAdmin/js/jQuery-BlockUI/jquery.blockUI.min.js"></script>
	<!-- SPARKLINES -->
	<script type="text/javascript" src="../static/CloudAdmin/js/sparklines/jquery.sparkline.min.js"></script>
	<!-- EASY PIE CHART -->
	<script src="../static/CloudAdmin/js/jquery-easing/jquery.easing.min.js"></script>
	<script type="text/javascript" src="../static/CloudAdmin/js/easypiechart/jquery.easypiechart.min.js"></script>
	<!-- FLOT CHARTS -->
	<script src="../static/CloudAdmin/js/flot/jquery.flot.min.js"></script>
	<script src="../static/CloudAdmin/js/flot/jquery.flot.time.min.js"></script>
    <script src="../static/CloudAdmin/js/flot/jquery.flot.selection.min.js"></script>
	<script src="../static/CloudAdmin/js/flot/jquery.flot.resize.min.js"></script>
    <script src="../static/CloudAdmin/js/flot/jquery.flot.pie.min.js"></script>
    <script src="../static/CloudAdmin/js/flot/jquery.flot.stack.min.js"></script>
    <script src="../static/CloudAdmin/js/flot/jquery.flot.crosshair.min.js"></script>



	<!-- TODO -->
	<script type="text/javascript" src="../static/CloudAdmin/js/jquery-todo/js/paddystodolist.js"></script>
	<!-- TIMEAGO -->
	<script type="text/javascript" src="../static/CloudAdmin/js/timeago/jquery.timeago.min.js"></script>
	<!-- FULL CALENDAR -->
	<script type="text/javascript" src="../static/CloudAdmin/js/fullcalendar/fullcalendar.min.js"></script>
	<!-- COOKIE -->
	<script type="text/javascript" src="../static/CloudAdmin/js/jQuery-Cookie/jquery.cookie.min.js"></script>
	<!-- GRITTER -->
	<script type="text/javascript" src="../static/CloudAdmin/js/gritter/js/jquery.gritter.min.js"></script>
	<!-- CUSTOM SCRIPT -->
	<script src="../static/CloudAdmin/js/script.js"></script>



    <!-- JAVASCRIPTS -->
	<!-- Placed at the end of the document so the pages load faster -->


	<!-- SLIMSCROLL -->
{#	<script type="text/javascript" src="../static/CloudAdmin/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js"></script><script type="text/javascript" src="../static/CloudAdmin/js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js"></script>#}

	<!-- BOOTSTRAP SWITCH -->
	<script type="text/javascript" src="../static/CloudAdmin/js/bootstrap-switch/bootstrap-switch.min.js"></script>
	<!-- BOOTBOX -->
	<script type="text/javascript" src="../static/CloudAdmin/js/bootbox/bootbox.min.js"></script>
	<!-- HUBSPOT MESSENGER -->
	<script type="text/javascript" src="../static/CloudAdmin/js/hubspot-messenger/js/messenger.min.js"></script>
	<script type="text/javascript" src="../static/CloudAdmin/js/hubspot-messenger/js/messenger-theme-flat.js"></script>
	<script type="text/javascript" src="../static/CloudAdmin/js/hubspot-messenger/js/messenger-theme-future.js"></script>

	<!-- TIMEAGO -->
{#	<script type="text/javascript" src="../static/CloudAdmin/js/timeago/jquery.timeago.min.js"></script>#}
	<!-- DATE PICKER -->
	<script type="text/javascript" src="../static/CloudAdmin/js/datepicker/picker.js"></script>
	<script type="text/javascript" src="../static/CloudAdmin/js/datepicker/picker.date.js"></script>
	<script type="text/javascript" src="../static/CloudAdmin/js/datepicker/picker.time.js"></script>
	<!-- COLOR PICKER -->
	<script type="text/javascript" src="../static/CloudAdmin/js/colorpicker/js/bootstrap-colorpicker.min.js"></script>
	<!-- RATY -->
	<script type="text/javascript" src="../static/CloudAdmin/js/jquery-raty/jquery.raty.min.js"></script>
	<!-- COOKIE -->
{#	<script type="text/javascript" src="../static/CloudAdmin/js/jQuery-Cookie/jquery.cookie.min.js"></script>#}

	<script type="text/javascript" src="../static/CloudAdmin/js/magic-suggest/magicsuggest-1.3.1-min.js"></script>

    <script src="../static/daterangepickernew/moment.js"></script>
	<script src="../static/daterangepickernew/daterangepicker.js"></script>


	<script src="../static/CloudAdmin/js/charts.js"></script>
    <script type="text/javascript" src="../static/layer-v3.0.1/layer/layer.js"></script>

     <!-- 引入 ECharts 文件 -->
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
    <script src="../static/echart/echarts.min.js"></script>

    <!-- SELECT2 -->
	<script type="text/javascript" src="../static/CloudAdmin/js/select2/select2.min.js"></script>



	<script>
        var myloading=layer;
        var loadobject;
        var pro; //下拉框内容


		jQuery(document).ready(function() {		
			App.setPage("bugsonline");  //Set current page
            //App.init();

            var response_data = {{ response_data|safe }};
            pro=response_data['proList'];
            var select=$("#e2");
                    var option = document.createElement("option");
                        option.setAttribute("type", "option");
                        option.setAttribute("id", 0);
                        option.setAttribute("value", "全选");
                        option.appendChild(document.createTextNode("全选"));
                        select.append(option);
                    for(var i=0;i<pro.length;i++) {
                        var option = document.createElement("option");
                        option.setAttribute("type", "option");
                        option.setAttribute("id", pro[i]);
                        option.setAttribute("value", pro[i]);
                        option.appendChild(document.createTextNode(pro[i]));
                        select.append(option);
                    }
			App.initBugOffline(pro); //Initialise plugins and elements
            //closeLoading(); // 隐藏等待图标
            initChart1();
            initChart2();

            //handleSidebar(); //Function to display the sidebar
			//handleSidebarCollapse(); //Function to hide or show sidebar
			//handleSidebarAndContentHeight();  //Function to hide sidebar and main content height

            //Charts.initCharts();
			//Charts.initPieCharts();





		});


		function onClickSearch(type) {

		    try{


		    //if(document.getElementsByClassName("ms-sel-item").length==0){
		    if(document.getElementById("e2").value==""){
                alert("请选择产品");
                return;
            }


		  // var project_select=document.getElementsByClassName("ms-sel-item")[0].innerText.replace(/^\s+|\s+$/g,"")
           var date_select=document.getElementById("reportrange").innerText.replace(/^\s+|\s+$/g,"")
            if(type=="custom"&&date_select=="自定义日期"){
                alert("请选择日期");
                return;
            }
            var project_select_list=[];

            var project_select="";

            $('select[id="e2"] option:selected').each(function () {
            　　//console.log($(this).val());
            　　project_select_list.push($(this).val())

            });
            if(project_select_list.indexOf("全选")>=0){
                project_select_list.length=0;
                project_select_list.push("全选")
                for(var value of pro)
                {
                   project_select_list.push(value)

                }

            }
            project_select=project_select_list.join(',');



           var currentDate=CurentTime();
           if(type=="today")
                date_select=currentDate+" - "+AddDate(currentDate,1);     //获取当前日期
           else if(type=="lastweak"){
               date_select=AddDate(currentDate,-7)+" - "+currentDate;
            }
           else if(type=="lastmonth"){
               var now = new Date();
               var day = now.getDate();            //日
               var dayindex=0-parseInt(day)  //今天是本月第几天
               var endday=AddDate(now,dayindex) //得到上个月最后一天
               var firstday=getMonthFirstDay(endday)
               date_select=firstday+" - "+endday;

           }

             $.ajax({

                            //async: true,
                            type: "POST",
                            url: "bugsonline/getRepairedRrateByGroup",
                            data: {"project": project_select,"created":date_select},
                            async:true,
                            cache:false,
                            //dataType: "json", //回调函数接收数据的数据格式
                            success: function (responseData) {

                                //Charts.initCharts(responseData);
                                //Charts.initPieCharts(responseData);
                                dataAnalyse(responseData);

                                return;
                            },
                            beforeSend: function () {
                                //myloading.msg("正在加载...",{icon:16});
                                loadobject = myloading.load(2, {shade: [0.5,'#fff']}); //0.1透明度的白色背景;
                                //此处用setTimeout演示ajax的回调
                                setTimeout(function(){
                                  myloading.close(ii);
                                }, 120000);

                                $("#today").attr({ disabled: "disabled" });// 禁用按钮防止重复提交
                                $("#lastweak").attr({ disabled: "disabled" });
                                $("#lastmonth").attr({ disabled: "disabled" });
                                $("#searchBtn").attr({ disabled: "disabled" });
                            },
                            complete: function () {
                            myloading.close(loadobject);
                            $("#today").removeAttr("disabled");
                            $("#lastweak").removeAttr("disabled");
                            $("#lastmonth").removeAttr("disabled");
                            $("#searchBtn").removeAttr("disabled");

                            },
                                error:function () { //请求数据失败
                                alert("服务器繁忙!");

                            }
                        });
           }catch (e) {
                alert(e.message)
            }






}

function dataAnalyse(datadict){
            var bugsAllByDayList=[]; //数据列表[[1,数据1],[2,数据2]]
            var bugsUnFixByDayList=[];
            var bugsByQaList=[];
            var bugsByQaList_all=[];
            var bugsByRdList=[];
            var bugsByRdList_all=[];
            var DayList=[]; //日期列表[[1，日期1],[2，日期2]]
            var QaList=[];//qa列表[[1，qa1],[2，qa2]]
            var RdList=[];//qa列表[[1，rd1],[2，rd2]]

            var QaList_echart=[];
            var ProList_echart=[];
            var statusList=[]; //所有bug状态的列表
            var statusListPro=[]; //所有bug状态的列表
            var statusNumByQa_DataList=[];//新需求，按qa人统计各个状态的bug数
            var statusNumByPro_DataList=[];//新需求，按project人统计各个状态的bug数


            var bugsAllByDayDic = new Array();//通过申明一个Array来做一个字典

            for(var key in datadict){
                if(key=="qaList"){
                    QaList_echart=datadict[key];

                }
                if(key=="projectList"){
                    ProList_echart=datadict[key];

                }
                if(key=="statusNumByQa"){
                        var statusNumByQaDic=datadict[key];
                        //{active=[[人1,num1],[人2,num2]],closed=[[人1,num1],[人2,num2]}
                    for(key1 in statusNumByQaDic){
                        var series_qa= {};
                        series_qa["name"]=key1;
                        series_qa["type"]="bar";
                        series_qa["stack"]="status";
                        series_qa["yAxisIndex"]=0;
                        series_qa["itemStyle"]="itemStyle";
                        series_qa["data"]=[];
                        if(key1=="total"){
                        series_qa["label"]={normal: { show: true,position: 'top',formatter: '', color: 'black',textStyle: {color: '#000'}}};
                        }
                        data_tmp=statusNumByQaDic[key1];
                        var QaList_echart=[];//echart用的qa列表
                         for(var key2 in data_tmp ){

                            QaList_echart.push(key2)
                             if(key1=="total"){
                            series_qa["data"].push(0);
                            }
                            else{

                            series_qa["data"].push(data_tmp[key2]);
                            }

                        }
                        {#for(index in data_tmp ){#}
                        {##}
                        {#    QaList_echart.push(data_tmp[index][0])#}
                        {#    series_qa["data"].push(data_tmp[index][1])#}
                        {#}#}
                        //dataDict["data"]=statusNumByQaDic[key1];
                        statusNumByQa_DataList.push(series_qa);
                        statusList.push(key1)
                    }
                }
                if(key=='statusNumByProject'){
                    var statusNumByProDic=datadict[key];
                    for(key1 in statusNumByProDic){
                        var series_pro= {};
                        series_pro["name"]=key1;
                        series_pro["type"]="bar";
                        series_pro["stack"]="status";
                        series_pro["yAxisIndex"]=0;
                        series_pro["itemStyle"]="itemStyle";
                        series_pro["data"]=[];
                        if(key1=="total"){
                        series_pro["label"]={normal: { show: true,position: 'top',formatter: '', color: 'black',textStyle: {color: '#000'}}};
                        }
                        data_tmp=statusNumByProDic[key1];
                        var ProList_echart=[];//echart用的project列表
                        for(var key2 in data_tmp ){
                            ProList_echart.push(key2);
                            if(key1=="total"){
                            series_pro["data"].push(0);
                            }
                            else{

                            series_pro["data"].push(data_tmp[key2]);
                            }

                        }
                        statusNumByPro_DataList.push(series_pro);
                        statusListPro.push(key1)

                        }

                        /*for(index in data_tmp ){

                            ProList_echart.push(data_tmp[index][0])
                            series_pro["data"].push(data_tmp[index][1])
                        }*/







                    //series_pro["label"]={normal: { show: true,position: 'top',formatter: '{b}:{c}'}};

                     }
                    if(key=='bugsAllByDay') //每天新提的bug数
                    {
                         var index=0
                        bugsAllByDayDic=datadict[key]
                        for(var key in bugsAllByDayDic){
                            datenew=bugsAllByDayDic[key]
                            DayList[index]=[index+1,key]
                            bugsAllByDayList[index]=[index+1,datenew]
                            index++
                        }
                    }//bugsUnFixByDay
                    if(key=='bugsUnFixByDay')  //截止当天未关闭的bug数
                        {
                             var index=0
                            bugsUnFixByDayDic=datadict[key]
                            for(var key in bugsUnFixByDayDic){
                                datenew=bugsUnFixByDayDic[key]
                                DayList[index]=[index+1,key]
                                bugsUnFixByDayList[index]=[index+1,datenew]
                                index++
                            }
                        }//repairedRateTotal
                    if(key=='repairedRateTotal')  //项目总修复率
                            {
                                repairedRateTotal_Pie=datadict[key]
                            }

                     if(key=='qaRepairedRateDict') {
                         var index = 0
                         bugsByQaListDic = datadict[key]

                         var series_qa= {};
                         series_qa["name"]="修复率";
                         series_qa["type"]="bar";
                         series_qa["stack"]="repairReate";
                         series_qa["yAxisIndex"]=1;
                         series_qa["itemStyle"]="itemStyle";
                         series_qa["data"]=[];
                         series_qa["label"]={normal: { show: true,position: 'top',formatter: '{a}={c} %'}};
                         for (var key in bugsByQaListDic) {
                             qanew = bugsByQaListDic[key]
                             series_qa["data"].push(qanew)

                         }
                         statusNumByQa_DataList.push(series_qa);

                     }
                     if(key=='repairedRateByProject') {
                         var index = 0
                         bugsByProListDic = datadict[key]

                         var series_pro= {};
                         series_pro["name"]="修复率";
                         series_pro["type"]="bar";
                         series_pro["stack"]="repairReate";
                         series_pro["yAxisIndex"]=1;
                         series_pro["itemStyle"]="itemStyle";
                         series_pro["data"]=[];
                         series_pro["label"]={normal: { show: true,position: 'top',formatter: '{a}={c} %'}};
                         for (var key in bugsByProListDic) {
                             qanew = bugsByProListDic[key]
                             series_pro["data"].push(qanew)

                         }
                         statusNumByPro_DataList.push(series_pro);

                     }
                     if(key=='rdRepairedRateDict') {
                         var index = 0
                         bugsByRdListDic = datadict[key]
                         for (var key in bugsByRdListDic) {
                             rdnew = bugsByRdListDic[key]
                             RdList[index] = [index + 1, key]
                             bugsByRdList[index] = [index + 1, "       "+rdnew]
                             index++

                         }
                     }

                     /*if(key=='qaAllBugsDict') {
                         var index = 0
                         bugsByQaListDic_all = datadict[key]
                         var series_qa= {};
                         series_qa["name"]="总bug数";
                         series_qa["type"]="line";
                         //series_qa["yAxisIndex"]=0;

                         series_qa["data"]=[];
                         for (var key in bugsByQaListDic_all) {
                             qanew = bugsByQaListDic_all[key]
                             series_qa["data"].push(qanew)

                         }
                         statusNumByQa_DataList.push(series_qa);
                     }*/

                     if(key=='rdAllBugsDict') {
                         var index = 0
                         bugsByRdListDic_all = datadict[key]
                         for (var key in bugsByRdListDic_all) {
                             rdnew = bugsByRdListDic_all[key]
                             RdList[index] = [index + 1, key]
                             bugsByRdList_all[index] = [index + 1, "       "+rdnew]
                             index++

                         }
                     }



                     }
            //statusList.push("总bug数");
            statusList.push("修复率");
            statusListPro.push("修复率");
            initChart1(statusNumByQa_DataList,QaList_echart,statusList)
            initChart2(statusNumByPro_DataList,ProList_echart,statusListPro)

}


function CurentTime()
    {
        var now = new Date();
        var year = now.getFullYear();       //年
        var month = now.getMonth() + 1;     //月
        var day = now.getDate();            //日


        var clock = year + "-";

        if(month < 10)
            clock += "0";

        clock += month + "-";

        if(day < 10)
            clock += "0";

        clock += day + " ";

        return(clock.replace(/^\s+|\s+$/g,""));
    }

//+---------------------------------------------------
//| 日期计算
//+---------------------------------------------------
function AddDate(date,addDays){ //date传入你需要的日期，格式"xxxx-xx-xx"。addDays传要加减的日期数，往前传正数，往后传负数
    var Dates = new Date(date);
    Dates.setDate(Dates.getDate() + addDays);
    var mon = Dates.getMonth() + 1,
        day = Dates.getDate();
    if(mon < 10){
        mon = "0" + mon;//月份小于10，在前面补充0
    }
    if(day < 10){
        day = "0" + day;//日小于10，在前面补充0
    }
    return Dates.getFullYear() + "-" + mon + "-" +day;
}
function getMonthFirstDay(date){ //date传入你需要的日期，格式"xxxx-xx-xx"。得到这个月的第一天
    var Dates = new Date(date);
    //Dates.setDate(Dates.getDate() + addDays);
    var mon = Dates.getMonth() + 1,
        day = 1;
    if(mon < 10){
        mon = "0" + mon;//月份小于10，在前面补充0
    }
    if(day < 10){
        day = "0" + day;//日小于10，在前面补充0
    }
    return Dates.getFullYear() + "-" + mon + "-" +day;
}

	</script>

 <script>




         function bugsearch() {
            var itemValue1=App.getMagicSelect()
            $.ajax({
                            type: "POST",
                            url: "bugsonline/getRepairedRrateByGroup",
                            data: {"project": itemValue1},
                            async:false,
                            success: function () {
                                //location.replace('/monitor/showcases?interfaceid={{ interface.id }}')
                                return;
                            }
                        });
                }

    </script>

    <script type="text/javascript">
        function initChart1(statusNumByQa_DataList,QaList,statusList){
            // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('char1_bugsbyqa'));

        // 指定图表的配置项和数据
        myChart.title = '堆叠柱状图';

        var itemStyle = {
            normal: {

            },
            emphasis: {
                barBorderWidth: 1,
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowColor: 'rgba(0,0,0,0.5)'
            }
        };

option2 = {
    /*tooltip : {
        trigger: 'axis',
        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
    },*/

    tooltip: {},
    legend: {
        data:statusList

    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis : [
        {
            type : 'category',
            data : QaList

        }
    ],
    yAxis : [
         {
            type : 'value',
            name: 'bug数',
            position: 'left',
        },
        {
            type: 'value',
            name: '修复率',
            position: 'right',
            min: 0,
            max: 100,
            interval: 10,
            //offset: 20,
            axisLabel: {
                formatter: '{value} %'
            }
        }


    ],

    series : statusNumByQa_DataList,
};

var series_tmp1 = option2["series"];
        var fun2 = function (params) {
                var data4 =0;
                for(var i=0,l=series_tmp1.length;i<l;i++){
                    if(series_tmp1[i].name!="修复率"&&series_tmp1[i].name!="total")
                    {
                        data4 += series_tmp1[i].data[params.dataIndex]

                    }

                }
                return "bug总数="+data4.toString()
            }
            try{
            //加载页面时候替换倒数第二个series的formatter
            series_tmp1[series_tmp1.length-2]["label"]["normal"]["formatter"] = fun2
        }catch (e) {

            }

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option2);
        //myChart.on('brushSelected', renderBrushed);
         //legend点击事件，根据传过来的obj.selected得到状态是true的legend对应的series的下标，再去计算总和
        myChart.on("legendselectchanged", function(obj) {

                var series_tmp2 = option2["series"];
                var b2 = obj.selected
                  , d2 = [];
                  //alert(JSON.stringify(b))
                  for(var key in b2){
                    if(b2[key]){
                        //alert(key)
                        for(var i=0,l=series_tmp2.length;i<l;i++){
                            var changename = series_tmp2[i]["name"];
                            if(changename == key){
                                d2.push(i);//得到状态是true的legend对应的series的下标
                            }
                        }
                    }
                 }
                var fun3 = function (params) {
                    var data5 =0;
                    for(var i=0,l=d2.length;i<l;i++){
                        for(var j=0,h=series_tmp2.length;j<h;j++){
                            if(d2[i] == j){
                                //data3 += series[j].data[series_tmp.dataIndex] //重新计算总和
                                 if(series_tmp2[i].name!="修复率"&&series_tmp2[i].name!="total")
                                 {
                                    data5 += series_tmp2[j].data[params.dataIndex]

                                 }
                            }
                        }
                    }
                    return "bug总数="+data5.toString()
                }
                series_tmp2[series_tmp2.length-2]["label"]["normal"]["formatter"] = fun3
                myChart.setOption(option2);


        })
}




        function initChart2(statusNumByPro_DataList,ProList,statusListPro){
            // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('char2_bugsbypro'));

        // 指定图表的配置项和数据
        myChart.title = '堆叠柱状图';

        var itemStyle = {
    normal: {
    },
    emphasis: {
        barBorderWidth: 1,
        shadowBlur: 10,
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        shadowColor: 'rgba(0,0,0,0.5)'
    }
};

option = {
    /*tooltip : {
        trigger: 'axis',
        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        }
    },*/
    tooltip: {},
    legend: {
        data:statusListPro

    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis : [
        {
            type : 'category',
            data : ProList

        }
    ],
    yAxis : [
         {
            type : 'value',
            name: 'bug数',
            position: 'left',
        },
        {
            type: 'value',
            name: '修复率',
            position: 'right',
            min: 0,
            max: 100,
            interval: 10,
            //offset: 20,
            axisLabel: {
                formatter: '{value} %'
            }
        }


    ],
    series : statusNumByPro_DataList
};

 var series_tmp = option["series"];
        var fun = function (params) {
                var data3 =0;
                for(var i=0,l=series_tmp.length;i<l;i++){
                    if(series_tmp[i].name!="修复率"&&series_tmp[i].name!="total")
                    {
                        data3 += series_tmp[i].data[params.dataIndex]

                    }

                }
                return "bug总数="+data3.toString()
            }
            try{
            //加载页面时候替换倒数第二个series的formatter
            series_tmp[series_tmp.length-2]["label"]["normal"]["formatter"] = fun
        }catch (e) {

            }

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        //myChart.on('brushSelected', renderBrushed);
         //legend点击事件，根据传过来的obj.selected得到状态是true的legend对应的series的下标，再去计算总和
        myChart.on("legendselectchanged", function(obj) {

                var series_tmp = option["series"];
                var b = obj.selected
                  , d = [];
                  //alert(JSON.stringify(b))
                  for(var key in b){
                    if(b[key]){
                        //alert(key)
                        for(var i=0,l=series_tmp.length;i<l;i++){
                            var changename = series_tmp[i]["name"];
                            if(changename == key){
                                d.push(i);//得到状态是true的legend对应的series的下标
                            }
                        }
                    }
                 }
                var fun1 = function (params) {
                    var data3 =0;
                    for(var i=0,l=d.length;i<l;i++){
                        for(var j=0,h=series_tmp.length;j<h;j++){
                            if(d[i] == j){
                                //data3 += series[j].data[series_tmp.dataIndex] //重新计算总和
                                 if(series_tmp[i].name!="修复率"&&series_tmp[i].name!="total")
                                 {
                                    data3 += series_tmp[j].data[params.dataIndex]

                                 }
                            }
                        }
                    }
                    return "bug总数="+data3.toString()
                }
                series_tmp[series_tmp.length-2]["label"]["normal"]["formatter"] = fun1
                myChart.setOption(option);


        })
        }

    </script>







{#<script>#}
{#    function myloading(){#}
{##}
{#		layer.msg("正在加载...",{icon:16});#}
{##}
{#}#}
{##}
{#</script>#}



</body>
</html>